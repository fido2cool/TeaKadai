!function(a){function b(){function b(){$PeepSo.postJson("adminConfigLicense.check_license",{plugins:d},function(b){var d,e,f,g;if(b.success){d=b.data&&b.data.valid||{},e=b.data&&b.data.details||{};for(f in d)+d[f]?(g='<i class="ace-icon fa fa-check bigger-110" style="color:green"></i>',a("#error_"+f).hide()):(g='<i class="ace-icon fa fa-times bigger-110" style="color:red"></i>',a("#error_"+f).show()),e[f]&&(g=g+'<p class="peepso_license_details" style="clear:both;font-size:9px">'+e[f].diff+"</p>"),c.filter("#"+f).html(g)}})}var c=a(".license_status_check"),d={};c.length&&(c.each(function(){var b=a(this);d[b.attr("id")]=b.data("plugin-name")}),b(),setInterval(function(){b()},3e4))}function c(){var b=a("input[type=text].validate");b.off("keyup.validate").on("keyup.validate",function(){var b=a(this);d(b,b.data())}).trigger("keyup")}function d(a,b){clearTimeout(o),o=setTimeout(function(){"int"===b.ruleType?f(a,b):"email"===b.ruleType?g(a,b):e(a,b)},300)}function e(a,b){var c=a.val(),d=a.attr("name");b.ruleMinLength=+b.ruleMinLength,b.ruleMaxLength=+b.ruleMaxLength,b.ruleMinLength&&c.length<b.ruleMinLength?(h(a,b),n[d]=!0):b.ruleMaxLength&&c.length>b.ruleMaxLength?(h(a,b),n[d]=!0):(i(a,b),n[d]=!1,delete n[d]),j()}function f(a,b){var c=+a.val(),d=a.attr("name");b.ruleMin=+b.ruleMin,b.ruleMax=+b.ruleMax,b.ruleMin&&c<b.ruleMin?(h(a,b),n[d]=!0):b.ruleMax&&c>b.ruleMax?(h(a,b),n[d]=!0):(i(a,b),n[d]=!1,delete n[d]),j()}function g(a,b){var c=a.val(),d=/^([*+!.&#$Â¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,15})$/i;d.test(c)?(i(a,b),n[name]=!1,delete n[name]):(h(a,b),n[name]=!0),j()}function h(b,c){var d;b.hasClass("error")||(c.ruleMessage&&(d=b.next(".validate-error"),d.length||(d=a(['<div class="validate-error tooltip bottom">','<div class="tooltip-arrow"></div>','<div class="tooltip-inner">',c.ruleMessage,"</div></div>"].join("")),d.insertAfter(b))),b.addClass("error"))}function i(a,b){a.hasClass("error")&&a.removeClass("error")}function j(){clearTimeout(p),p=setTimeout(k,300)}function k(){var b,c=!1;for(b in n)if(n[b]){c=!0;break}var d=a("#peepso button[type=submit]");c?d.attr("disabled","disabled"):d.removeAttr("disabled")}function l(){clearTimeout(q),q=setTimeout(m,300)}function m(){a("#edit_warning").show()}a(document).ready(function(){var c=a("input[name='site_activity_limit_comments']");c.size()>0&&c.on("change",function(){a(this).is(":checked")?a("input[name='site_activity_comments_allowed']").removeAttr("readonly"):a("input[name='site_activity_comments_allowed']").attr("readonly","readonly")}).trigger("change"),b();var d=a("#reset-check");if(d.length){var e=a("#reset-do");d.on("click",function(){this.checked?e.removeAttr("disabled"):e.attr("disabled","disabled")}),e.on("click",function(a){a.preventDefault(),a.stopPropagation();var b=window.location.href;b=b.replace("&reset=1",""),window.location=b+"&reset=1"})}var f=window.location.href;if(f.indexOf("page=peepso_config")>-1){var g=a("#toplevel_page_peepso li.current ul.wp-submenu-wrap"),h=0;f.indexOf("tab=appearance")>-1?h=1:f.indexOf("tab=email")>-1?h=2:f.indexOf("tab=advanced")>-1&&(h=3),g.find("a").eq(h).parent().siblings().find("a").css({color:"rgba(240,245,250,.7)",fontWeight:"normal"}).on("mouseenter",function(){a(this).css({color:"#00b9eb"})}).on("mouseleave",function(){a(this).css({color:"rgba(240,245,250,.7)"})})}});var n={},o=!1,p=!1,q=!1;a(function(){c(),a("#peepso button[type=reset]").on("click",function(){setTimeout(c,100),setTimeout(function(){a("#edit_warning").hide()},1e3)}),a("#peepso").find("input[type=text], textarea").on("keyup",function(){l()}),a("#peepso").find("input[type=checkbox], select").on("change",function(){l()})})}(jQuery);