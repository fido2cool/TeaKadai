function PsMoods(){this.$postbox=null,this.$mood=null,this.$mood_remove=null,this.$mood_dropdown_toggle=null,this.mood_selected=!1,this.can_submit=!1}PsMoods.prototype.set_postbox=function(a){this.$postbox=a},PsMoods.prototype.init=function(){if(!_.isUndefined(this.$postbox)){var a=this;ps_observer.add_filter("peepso_postbox_can_submit",function(b){return b.soft.push(a.can_submit),b},20,1),this.$mood=jQuery("#postbox-mood",this.$postbox),this.$mood_dropdown_toggle=jQuery("#mood-tab .interaction-icon-wrapper > a",this.$postbox),this.$mood_remove=jQuery("#postbox-mood-remove",this.$postbox),this.$mood.on("click","li.mood-list > a",function(b){a.select_mood(b)}),this.$mood_remove.on("click",function(){a.remove_mood()}),this.$mood_dropdown_toggle.on("click",function(){a.$mood.toggle()}),this.$mood_dropdown_toggle.on("peepso.interaction-hide",function(){a.$mood.hide()}),jQuery(document).on("click",function(b){var c=jQuery("#mood-tab",a.$postbox);c.is(b.target)||0!==c.has(b.target).length||a.$mood.hide()}),this.$postbox.on("postbox.post_cancel postbox.post_saved",function(){a.remove_mood()}),ps_observer.add_filter(this.$postbox.selector+"-postbox_req",function(b){return a.set_mood(b)},10,1),ps_observer.add_filter("peepso_postbox_addons_update",function(b){var c,d;return a.mood_selected&&(c=a.mood_selected,d='<i class="ps-emoticon '+c[0]+'"></i> <b>'+c[1]+"</b>",b.push(d)),b},10,1)}},PsMoods.prototype.select_mood=function(a){var b=jQuery(a.target).closest("a"),c=jQuery("#mood-tab",this.$postbox),d=jQuery("#postbox-mood-input",this.$postbox),e=(c.find("a"),b.closest("#postbox-mood")),f=(this.$postbox.$textarea.parent(),this.$mood_remove.parent()),g=b.find("i").attr("class"),h=jQuery("#mood-text-string").text()+b.attr("data-option-display-value");d.val(b.attr("data-option-value")),jQuery(f).show(),e.hide(),this.mood_selected=[g,h],this.can_submit=!0,this.$postbox.on_change()},PsMoods.prototype.remove_mood=function(){jQuery("span#postmood",this.$postbox.$textarea.parent()).remove(),jQuery("#postbox-mood-input",this.$postbox).val(""),this.$mood_remove.parent().hide(),this.$mood.hide(),this.mood_selected=!1,this.can_submit=!1,this.$postbox.on_change()},PsMoods.prototype.set_mood=function(a){return"undefined"==typeof a.mood&&(a.mood=""),a.mood=jQuery("#postbox-mood-input",this.$postbox).val(),a},ps_observer.add_filter("peepso_postbox_addons",function(a){return a.push(new PsMoods),a},10,1);